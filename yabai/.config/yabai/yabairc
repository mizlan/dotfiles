gapsize=6
margin=3
borderwidth=3

# gapsize=28
# margin=20
# borderwidth=8

yabai -m signal --add event=dock_did_restart action="sudo yabai --load-sa && sleep 1 && yabai -m config window_shadow off"
sudo yabai --load-sa

yabai -m config                           \
  window_shadow              off          \
                                          \
  mouse_action1              move         \
  mouse_action2              resize       \
                                          \
  mouse_modifier             fn           \
  focus_follows_mouse        off          \
  mouse_follows_focus        off          \
                                          \
  layout                     bsp          \
  top_padding                $margin      \
  bottom_padding             $margin      \
  left_padding               $margin      \
  right_padding              $margin      \
  window_gap                 $gapsize     \
                                          \
  window_opacity             off           \
  window_opacity_duration    0.15         \
  active_window_opacity      1.0         \
  normal_window_opacity      1.0         \
                                          \
  window_animation_duration  0.05

yabai -m signal --add event=window_created action='echo r | nc 127.0.0.1 1337'
yabai -m signal --add event=window_destroyed action='echo r | nc 127.0.0.1 1337'

yabai -m signal --add event=mission_control_exit action='echo "refresh" | nc -U /tmp/yabai-indicator.socket'
yabai -m signal --add event=display_added action='echo "refresh" | nc -U /tmp/yabai-indicator.socket'
yabai -m signal --add event=display_removed action='echo "refresh" | nc -U /tmp/yabai-indicator.socket'
yabai -m signal --add event=window_created action='echo "refresh windows" | nc -U /tmp/yabai-indicator.socket'
yabai -m signal --add event=window_destroyed action='echo "refresh windows" | nc -U /tmp/yabai-indicator.socket'
yabai -m signal --add event=window_focused action='echo "refresh windows" | nc -U /tmp/yabai-indicator.socket'
yabai -m signal --add event=window_moved action='echo "refresh windows" | nc -U /tmp/yabai-indicator.socket'
yabai -m signal --add event=window_resized action='echo "refresh windows" | nc -U /tmp/yabai-indicator.socket'
yabai -m signal --add event=window_minimized action='echo "refresh windows" | nc -U /tmp/yabai-indicator.socket'
yabai -m signal --add event=window_deminimized action='echo "refresh windows" | nc -U /tmp/yabai-indicator.socket'

# yabai -m signal --add event=space_changed action="yabai -m window --focus \$(yabai -m query --windows --space | jq .[0].id)"

# Logic 2010
yabai -m rule --add app="^LogicProgram$" manage=off

# choose
yabai -m rule --add app="^choose$" manage=off

# System Preferences
yabai -m rule --add app="^System Settings$" manage=off

# ephemeral
yabai -m rule --add title="^ephemeral-" manage=off grid=6:4:1:1:2:4

# TLDraw

curspace=$(yabai -m query --spaces --space | jq .index)

yabai -m space --focus 1
yabai -m space --focus 2
yabai -m space --focus 3
yabai -m space --focus 4
yabai -m space --focus 5
yabai -m space --focus 6
yabai -m space --focus 7
yabai -m space --focus 8
yabai -m space --focus 9

yabai -m space --focus $curspace

$HOME/.config/yabai/centerstubborn.sh

$HOME/Repositories/JankyBorders/bin/borders \
  "active_color=gradient(top_left=0xffffc640,bottom_right=0xff953ee6)" \
  "inactive_color=gradient(top_left=0xff45c4c0,bottom_right=0xffba3aa5)" \
  width=3
